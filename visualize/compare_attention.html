<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta
            name="description"
            content="Visualizer of BERT's Attention Mechanism and analyser of adversarial attacks."
        />
        <meta
            name="keywords"
            content="BERT,Attention,Adversarial Attack,Shortcut Learning, DistilBERT,NLP"
        />
        <title>Attentive BERT</title>
        <link
            rel="icon"
            type="image/png"
            href="../resources/favicon.png"
        />
        <link
            rel="stylesheet"
            href="../resources/style.css"
        />
        <script
            src="../resources/script.js"
            defer
        ></script>
    </head>
    <body>
        <nav aria-label="Navbar" class="navbar navbar-expand-md navbar-light bg-light">
    <div class="container-md">
        <div class="navbar-leftmost">
            <button
                aria-controls="navbarContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
                class="navbar-toggler"
                data-bs-target="#navbarContent"
                data-bs-toggle="collapse"
                type="button"
            >
                <span class="navbar-toggler-icon">
                </span>
            </button>
            <a class="navbar-brand" href="../">
                <img src="../resources/img/logo.png"> Attentive<strong>BERT</strong>
            </a>
        </div>
        <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav me-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">Learn</a>
                    <ul class="dropdown-menu navbar-dropdown-animation">
                        <li><a class="dropdown-item" href="../learn/bert.html">BERT</a></li>
                        <li><a class="dropdown-item" href="../learn/attention.html">Self-Attention mechanism</a></li>
                        <li><a class="dropdown-item" href="../learn/nli.html">Natural Language Inference (NLI)</a></li>
                        <li><a class="dropdown-item" href="../learn/ari.html">Argumentative Relation Identification (ARI)</a></li>
                        <li><a class="dropdown-item" href="../learn/fv.html">Fact Verification (FV)</a></li>
                        <li><a class="dropdown-item" href="../learn/shortcut_learning.html">Shortcut learning</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">Visualize</a>
                    <ul class="dropdown-menu navbar-dropdown-animation">
                        <li><a class="dropdown-item" href="../visualize/attention_heatmaps.html">Attention weights (Single input)</a></li>
                        <li><a class="dropdown-item" href="../visualize/compare_attention.html">Compare attention weights (Two inputs)</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../adversarial_attacks.html">
                        Adversarial Attacks
                    </a>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="../about.html">
                        About
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/Goncalerta/AttentiveBERT">
                        <i class="bi bi-github"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container my-4">
    <main>
      <div class="article-intro ps-lg-4">
        <h1 class="article-title" id="content">Compare attention weights</h1>
        <p class="article-lead">Input two pairs of sentences for one of the available tasks to compare the model predictions and visualize the attention weights for each head.</p>
        <div class="alert alert-danger mx-5" role="alert">
          <b><i class="bi bi-exclamation-triangle"></i> Warning:</b> You are browsing a static version of this website. Since there is no backend it is not possible to run any models.
        </div>
      </div>
      <div class="article-content px-lg-4">
            <form class="visualize-form visualize-compare-form container px-m-5">
              <div class="task-selection mb-2">
                  <label for="task" class="form-label ">Task:</label>
                  <div class="input-loose-group mb-3">
                    <select disabled name="task" class="form-select" aria-label="Select task">
                        <option selected disabled></option>
                    </select>
                    <i class="bi bi-question-circle help-tooltip help-tooltip-model" data-bs-toggle="tooltip" data-bs-placement="top"></i>
                  </div>
                  <label for="model" class="form-label ">Model:</label>
                  <div class="input-loose-group mb-3">
                    <select name="model" class="form-select form-select-model form-select-nli" aria-label="Select model" disabled>
                        <option value="0" selected disabled data-abert-description="Not available."></option>
                    </select>
                    <i class="bi bi-question-circle help-tooltip help-tooltip-model" data-bs-toggle="tooltip" data-bs-placement="top"></i>
                  </div>
                </div>
                <div class="model-runner">
                  <label for="sentence_a1" class="form-label input1">{{label['a']}}:</label>
                  <input
                      name="sentence_a1"
                      type="text"
                      disabled
                      placeholder="Enter text..."
                      class="form-control input1">
                  <label for="sentence_b1" class="form-label input1">{{label['b']}}:</label>
                  <input class="form-control input1" name="sentence_b1" type="text" disabled placeholder="Enter text...">
                  <label for="sentence_a2" class="form-label input2">{{label['a']}}:</label>
                  <input
                      name="sentence_a2"
                      type="text"
                      disabled
                      placeholder="Enter text..."
                      class="form-control input2">
                  <label for="sentence_b2" class="form-label input2">{{label['b']}}:</label>
                  <input class="form-control input2" name="sentence_b2" type="text" disabled placeholder="Enter text...">
                  <button disabled class="btn btn-primary rand-adv-attack" type="button">Random adversarial attack</button>
                  <button disabled type="submit" class="btn-submit btn btn-primary">Run</button>
                </div>
            </form>
      </div>
      <div class="d-flex justify-content-center d-none" id="loading-spinner">
        <div class="spinner-border text-primary" role="status"></div>
      </div>
      <div class="d-flex">
        <div id="attention-visualizer" class="mx-auto"></div>
    </div>
    <div class="px-3">
        <h2>About this visualizer</h2>
          <p>Upon submitting two pairs of sentences, the model will output a prediction and show the confidence on each label for both inputs. It will also output an interactive heatmap that compares the attention weights.</p>
          <p>With "compare heatmap", each cell of the heatmap encodes the attention from the token in the y axis to the token in the x axis. The left half of a cell encodes the attention of the first input, while the right half encodes the attention of the second input. If the token isn't present in one of the inputs (insertion or removal), the cells of that input with the token appear white.
          If a token is substituted by another, both appear in the same row and column as "token1 / token2".</p>
          <p>With "difference heatmap", the cells of the heatmap correspond to the difference between the attentions of the respective cells for each input (second input - first input). If the token isn't present in one of the inputs (insertion or removal), the attention of that input for that token is considered 0.</p>
          <p>By pressing "Random adversarial attack", the input fields will be filled with a pregenerated random adversarial attack.</p>
          <p>The buttons panel allows to select a single head of a single layer. 
          Clicking on a layer label will show the average weights of all heads in that layer. Clicking on a head label will show the average weights of the heads in that position in every layer.
          Clicking on the circle on the lower left of the buttons panel will show the average of all heads in every layer.</p>
        </div>
        </div>
    </main>
  </div>
 <div class="container mt-4">
    <hr>
    <footer>
        <p class="mb-0 copyright">Copyright &copy; Pedro Gon√ßalo Correia 2022</p>
        <p class="mb-0 copyright">This website and its content is licensed under the <a href="https://github.com/Goncalerta/AttentiveBERT/blob/main/LICENSE">GNU GENERAL PUBLIC LICENSE v3</a>.</p>
        <ul class="nav">
            <li class="nav-item">
                <a class="nav-link ps-0" href="mailto: pedrogoncalocorreia@hotmail.com"><i class="bi bi-envelope"></i> pedrogoncalocorreia@hotmail.com</a>
            </li>
            <li class="nav-item">
                <a class="nav-link ps-0" href="https://github.com/Goncalerta"><i class="bi bi-github"></i> Github</a>
            </li>
            <li class="nav-item">
                <a class="nav-link ps-0" href="https://www.linkedin.com/in/pedro-goncalo-correia/"><i class="bi bi-linkedin"></i> Linkedin</a>
            </li>
        </ul>
    </footer>
</div>
    </body>
</html>
